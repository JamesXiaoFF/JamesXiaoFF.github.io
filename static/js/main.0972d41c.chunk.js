(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(t,e,a){},28:function(t,e,a){},38:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),s=a(8),r=a.n(s),o=(a(27),a(16)),c=a(17),h=a(21),d=a(19),u=(a(28),a(47)),l=a(20),f=a(1);var p=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).showImage=function(){(function(t){return new Promise((function(e,a){var n=new Image;n.src=t,n.onload=function(){e(n)},n.onerror=function(t){a(t)}}))})("https://media-public.canva.cn/k2Xu0/MAEhC6k2Xu0/1/s2.png").then((function(e){t.loadVideoToCanvas()})).catch((function(t){alert(t)}))},t.loadVideoToCanvas=function(){var e=t.video.current,a=t.button.current;t.state.isPlaying?(e.pause(),t.setState({isPlaying:!1}),a.innerText="\u6682\u505c"):(e.play(),t.setState({isPlaying:!0}),a.innerText="\u64ad\u653e"),e.addEventListener("play",(function(){t.timerCallback()}),!1)},t.timerCallback=function(){var e=t.video.current;e.paused||e.ended||(t.computeFrame(),setTimeout((function(){t.timerCallback()}),0))},t.computeFrame=function(){var e=t.video.current,a=t.canvas1.current.getContext("2d");t.state.isUpdating||(a.drawImage(e,t.state.x,t.state.y,t.state.width,t.state.height),a.fillStyle="rgb(255,0,0)",a.fillRect(t.state.x,t.state.y+t.state.height,t.state.width,2))},t.state={x:100,y:100,width:200,height:200,xyArray:[100,100],whArray:[200,200],isUpdating:!1,isPlaying:!1},t.canvas1=i.a.createRef(),t.video=i.a.createRef(),t.button=i.a.createRef(),t}return Object(c.a)(a,[{key:"render",value:function(){var t=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)("video",{ref:this.video,src:"https://mdn.github.io/dom-examples/canvas/chroma-keying/media/video.mp4",controls:!0,crossOrigin:"anonymous"}),Object(f.jsxs)("div",{className:"canvas1",children:[Object(f.jsx)("canvas",{ref:this.canvas1,width:"360px",height:"640px"}),Object(f.jsx)(l.a,{bounds:"parent",size:{width:this.state.width,height:this.state.height},position:{x:this.state.x,y:this.state.y},onDragStart:function(e,a){t.setState({isUpdating:!0})},onDrag:function(e,a){var n=t.canvas1.current.getContext("2d"),i=t.video.current,s=t.state.xyArray.pop(),r=t.state.xyArray.pop();n.clearRect(r,s,t.state.width,t.state.height+2),n.drawImage(i,r+a.deltaX,s+a.deltaY,t.state.width,t.state.height),n.fillStyle="rgb(255,0,0)",n.fillRect(r+a.deltaX,s+a.deltaY+t.state.height,t.state.width,2),t.state.xyArray.push(r+a.deltaX,s+a.deltaY)},onDragStop:function(e,a){t.setState({x:a.x,y:a.y,isUpdating:!1}),t.computeFrame()},onResizeStart:function(e,a,n,i,s){t.setState({isUpdating:!0})},onResize:function(e,a,n,i,s){console.log(i,s);var r=t.canvas1.current.getContext("2d"),o=t.video.current,c=t.state.whArray.pop(),h=t.state.whArray.pop(),d=t.state.xyArray.pop(),u=t.state.xyArray.pop();r.clearRect(u,d,h,c+2),r.drawImage(o,s.x,s.y,n.offsetWidth,n.offsetHeight),r.fillStyle="rgb(255,0,0)",r.fillRect(s.x,s.y+n.offsetHeight,n.offsetWidth,2),t.state.xyArray.push(s.x,s.y),t.state.whArray.push(n.offsetWidth,n.offsetHeight)},onResizeStop:function(e,a,n,i,s){t.setState({x:s.x,y:s.y,width:n.offsetWidth,height:n.offsetHeight,isUpdating:!1}),t.computeFrame()},enableResizing:!0})]}),Object(f.jsx)(u.a,{ref:this.button,id:"button",variant:"contained",onClick:this.showImage,children:"\u5f00\u59cb"})]})}}]),a}(n.Component);r.a.render(Object(f.jsx)(p,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.0972d41c.chunk.js.map