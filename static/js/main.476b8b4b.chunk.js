(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(t,e,n){},28:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),s=n(8),c=n.n(s),o=(n(27),n(16)),r=n(17),h=n(21),d=n(19),u=(n(28),n(47)),l=n(20),f=n(1);var v=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).showImage=function(){(function(t){return new Promise((function(e,n){var a=new Image;a.src=t,a.onload=function(){e(a)},a.onerror=function(t){n(t)}}))})("https://media-public.canva.cn/k2Xu0/MAEhC6k2Xu0/1/s2.png").then((function(e){t.loadVideoToCanvas()})).catch((function(t){alert(t)}))},t.loadVideoToCanvas=function(){var e=t.video.current;e.play(),e.addEventListener("play",(function(){t.timerCallback()}),!1)},t.timerCallback=function(){var e=t.video.current;e.paused||e.ended||(t.computeFrame(),setTimeout((function(){t.timerCallback()}),0))},t.computeFrame=function(){var e=t.video.current,n=t.canvas1.current.getContext("2d");n.drawImage(e,t.state.x,t.state.y,t.state.width,t.state.height),n.fillStyle="rgb(255,0,0)",n.fillRect(t.state.x,t.state.y+t.state.height,t.state.width,2)},t.state={x:100,y:100,width:200,height:200},t.canvas1=i.a.createRef(),t.video=i.a.createRef(),t}return Object(r.a)(n,[{key:"render",value:function(){var t=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)("video",{ref:this.video,src:"https://mdn.github.io/dom-examples/canvas/chroma-keying/media/video.mp4",controls:!0,crossOrigin:"anonymous"}),Object(f.jsxs)("div",{className:"canvas1",children:[Object(f.jsx)("canvas",{ref:this.canvas1,width:"360px",height:"640px"}),Object(f.jsx)(l.a,{bounds:"parent",size:{width:this.state.width,height:this.state.height},position:{x:this.state.x,y:this.state.y},onDragStart:function(t,e){},onDragStop:function(e,n){t.canvas1.current.getContext("2d").clearRect(t.state.x,t.state.y,t.state.width,t.state.height+2),t.setState({x:n.x,y:n.y},(function(){return console.log(t.state)})),t.computeFrame()},onResizeStart:function(t,e,n,a,i){},onResizeStop:function(e,n,a,i,s){t.canvas1.current.getContext("2d").clearRect(t.state.x,t.state.y,t.state.width,t.state.height+2),t.setState({width:a.offsetWidth,height:a.offsetHeight}),t.computeFrame()},enableResizing:!0,children:Object(f.jsx)("div",{id:"rnd"})})]}),Object(f.jsx)(u.a,{id:"button",variant:"contained",onClick:this.showImage,children:"\u5f00\u59cb"})]})}}]),n}(a.Component);c.a.render(Object(f.jsx)(v,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.476b8b4b.chunk.js.map